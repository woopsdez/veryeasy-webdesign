{"version":3,"sources":["../src/matchTokenStream.js"],"names":["expectTokenStream","matchToken","token","expectShape","Object","keys","every","actualValue","key","expectedValues","Array","isArray","some","expectedValue","tokenStream","currentTokenPosition","tokenCount","length","expectedToken"],"mappings":"AAAA;AACA;;;;;kBAWwBA,iB;AAVxB,SAASC,UAAT,CAAoBC,KAApB,EAA2BC,WAA3B,EAAwC;AACpC,WAAOC,OAAOC,IAAP,CAAYF,WAAZ,EAAyBG,KAAzB,CAA+B,eAAO;AACzC,YAAMC,cAAcL,MAAMM,GAAN,CAApB;AACA;AACA,YAAMC,iBAAiBC,MAAMC,OAAN,CAAcR,YAAYK,GAAZ,CAAd,IAAkCL,YAAYK,GAAZ,CAAlC,GAAqD,CAACL,YAAYK,GAAZ,CAAD,CAA5E;AACA,eAAOC,eAAeG,IAAf,CAAoB,yBAAiB;AACxC,mBAAOL,gBAAgBM,aAAvB;AACH,SAFM,CAAP;AAGH,KAPM,CAAP;AAQH;AACc,SAASb,iBAAT,CAA2Bc,WAA3B,EAAwC;AACnD,QAAIC,uBAAuB,CAA3B;AACA,QAAMC,aAAaF,YAAYG,MAA/B;AACA,WAAO,UAACf,KAAD,EAAW;AACd,YAAMgB,gBAAgBJ,YAAYC,oBAAZ,CAAtB;AACA,YAAId,WAAWC,KAAX,EAAkBgB,aAAlB,CAAJ,EAAsC;AAClCH,oCAAwB,CAAxB;AACH,SAFD,MAEO;AACH;AACAA,mCAAuB,CAAvB;AACH;AACD;AACA,YAAIA,yBAAyBC,UAA7B,EAAyC;AACrC;AACAD,mCAAuB,CAAvB;AACA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KAfD;AAgBH","file":"matchTokenStream.js","sourcesContent":["// LICENSE : MIT\n\"use strict\";\nfunction matchToken(token, expectShape) {\n    return Object.keys(expectShape).every(key => {\n        const actualValue = token[key];\n        // 値は複数の場合もある\n        const expectedValues = Array.isArray(expectShape[key]) ? expectShape[key] : [expectShape[key]];\n        return expectedValues.some(expectedValue => {\n            return actualValue === expectedValue;\n        });\n    })\n}\nexport default function expectTokenStream(tokenStream) {\n    let currentTokenPosition = 0;\n    const tokenCount = tokenStream.length;\n    return (token) => {\n        const expectedToken = tokenStream[currentTokenPosition];\n        if (matchToken(token, expectedToken)) {\n            currentTokenPosition += 1;\n        } else {\n            // restart\n            currentTokenPosition = 0;\n        }\n        // match\n        if (currentTokenPosition === tokenCount) {\n            // match -> reset\n            currentTokenPosition = 0;\n            return true;\n        }\n        return false;\n    }\n}"]}