"use strict";
var r = require("./utils/regexp");
var TargetPattern = (function () {
    function TargetPattern(src) {
        if (!src) {
            throw new Error("src is requried");
        }
        if (typeof src === "string") {
            this.pattern = r.parseRegExpString(src);
            if (!this.pattern) {
                this.pattern = new RegExp(r.escapeSpecialChars(src));
            }
            this.pattern = r.addDefaultFlags(this.pattern);
            return;
        }
        else {
            if (!src.pattern) {
                throw new Error("pattern is requried");
            }
            this.pattern = r.parseRegExpString(src.pattern);
            if (!this.pattern) {
                this.pattern = r.addDefaultFlags(new RegExp(r.escapeSpecialChars(src.pattern)));
            }
            this.pattern = r.addDefaultFlags(this.pattern);
        }
    }
    TargetPattern.prototype.reset = function () {
        this.pattern.lastIndex = 0;
    };
    TargetPattern.prototype.toJSON = function () {
        var alt = {};
        for (var key in this) {
            if (key.indexOf("_") === 0) {
                continue;
            }
            var value = this[key];
            if (value instanceof RegExp) {
                alt[key] = value.toString();
                continue;
            }
            alt[key] = value;
        }
        return alt;
    };
    return TargetPattern;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = TargetPattern;
//# sourceMappingURL=targetPattern.js.map